<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Test-App</title>
  <link rel="stylesheet" href="todoapp.css">
  <script src="../lib/htmldecorators.js"></script>
  <script src="../lib/stdDecorators/event.js"></script>
  <script src="app/todo.js"></script>
  <script src="app/pageLoader.js"></script>
  <script>
    async function init() {
      var data = await loadPage('todo.html');
      document.body.innerHTML = data.html;
      console.log(data.decs)
      HTMLDecorators.ApplyDecorators(data.decs);
      HTMLDecorators.ApplyDecorators(data.decs, todoDec, 'todoDec');
    }

    function deleteAll(e, decorator) {
      e.preventDefault();
      var dec;
      if(dec = HTMLDecorators.FindById('entries')) {
        dec.removeAll();
      }
    }

    function testclick(e,dec) {
      console.log(e,dec);
    }

    function addText(e,dec) {
      console.log('submit',e,dec)
      var dec;
      if(dec = HTMLDecorators.FindById('entries')) {
        dec.addEntry(document.forms.form.text.value);
        document.forms.form.text.value = '';
      }
    }

    window.onload = function () {
      init();
    }
  </script>
</head>
<body>

</body>
</html>